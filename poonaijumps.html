<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ZIM - Code Creativity</title>

    <!-- zimjs.com - JavaScript Canvas Framework -->
    <script type="module">
      import zim from "https://zimjs.org/cdn/016/zim_physics";

      // See Docs under Frame for FIT, FILL, FULL, and TAG
      const assets = [
        "poonai1.png",
        "poonai2.png",
        "poonai3.png",
        "poonai4.png",
        "poonai5.png",
      ];
      const path = "assets/";
      new Frame(FIT, 1920, 1080, interstellar, dark, ready, assets, path);
      async function ready() {
        // given F (Frame), S (Stage), W (width), H (height)
        // put code here
        const fragmentResponse = await fetch("/shaders/halo.frag");
        const fragment = await fragmentResponse.text();

        const circleContainer = new Container(W - 150, H - 150)
          .reg(CENTER)
          .pos(0, 0, CENTER, CENTER)
          .sca(1)
          .drag({ all: true });
        const circleMask = new Circle(150, "gray")
          .center(circleContainer)
          .ord(-1)
          .alp(0.2);
        const halo = new Shader(W, H, fragment)
          .centerReg()
          .center(circleContainer)
          .ord(2);
        halo.sca(0.39);

        const poonai1 = new Pic("poonai1.png").centerReg().vis(false);
        const poonai2 = new Pic("poonai2.png").centerReg().sca(1.5).vis(false);
        const poonai3 = new Pic("poonai3.png").centerReg().vis(false);
        const poonai4 = new Pic("poonai4.png").centerReg().vis(false);
        const poonai5 = new Pic("poonai5.png").centerReg().vis(false);

        const poonais = [poonai1, poonai2, poonai3, poonai4, poonai5];
        loop(
          poonais,
          (poonai) => {
            poonai.addPhysics({ bounciness: 0.5, linear: 0.3 });
            poonai.impulse(1000, -2500);
            poonai.vis(true);
          },
          null,
          1
        );

        circleContainer.on("pressmove", () => {
          if (poonais.hitTestCircle(circleContainer)) {
            S.removeChild(poonais);
            S.update();
          }
        });
        // Ticker.add(poonaijump);
        // function poonaijump() {
        //   poonai1.force(40, 40, poonai1.x, poonai1.y);
        // }
        // Ticker.remove(poonaijump);
      } // end ready
    </script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>
  <body></body>
</html>
